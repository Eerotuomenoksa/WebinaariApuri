
<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeniorSurf Verkkol√§hetyslaskuri</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; overflow: hidden; }
        .settings-scroll::-webkit-scrollbar { width: 6px; }
        .settings-scroll::-webkit-scrollbar-track { background: transparent; }
        .settings-scroll::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .7; } }
        
        .strike-line {
            position: absolute;
            width: 120%;
            height: 3px;
            background-color: #ef4444;
            transform: rotate(-45deg);
            border-radius: 2px;
            box-shadow: 0 0 2px rgba(0,0,0,0.3);
        }

        input[type="time"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            filter: invert(0.5);
        }

        .music-playing-bars {
            display: flex;
            gap: 2px;
            height: 12px;
            align-items: flex-end;
        }
        .music-bar {
            width: 2px;
            background: currentColor;
            animation: music-bar-anim 1s ease-in-out infinite;
        }
        @keyframes music-bar-anim {
            0%, 100% { height: 4px; }
            50% { height: 12px; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom": "https://esm.sh/react-dom@18.2.0",
        "htm": "https://esm.sh/htm@3.1.1"
      }
    }
    </script>

    <script type="module">
        import React, { useState, useEffect, useMemo, useRef } from 'react';
        import ReactDOM from 'react-dom';
        import htm from 'htm';

        const html = htm.bind(React.createElement);

        const translations = {
            fi: {
                settings: 'Asetukset',
                language: 'Kieli',
                eventTitle: 'Otsikko',
                titlePos: 'Otsikon paikka',
                startTime: 'Alkamisaika',
                bgColor: 'Taustav√§ri',
                extraInfoLabel: 'Lis√§tiedot / Tervehdys',
                music: 'Taustamusiikki',
                musicSunoNotice: 'Lataa t√§h√§n aiemmin generoidut kappaleet:',
                logo: 'Lataa Logo',
                bgImage: 'Lataa Taustakuva',
                breakMode: 'Tapahtuman tila',
                breakOn: 'Tauko p√§√§ll√§',
                camWarning: 'Kamerakielto (viesti infopalstalla)',
                micWarning: 'Mikrofonikielto (viesti infopalstalla)',
                showSeconds: 'N√§yt√§ sekunnit kellossa',
                ready: 'VALMIS',
                startsIn: 'Tapahtuma alkaa',
                notice: 'Ilmoitus',
                days: 'Pv',
                hours: 'H',
                minutes: 'Min',
                seconds: 'Sek',
                camMessage: 'Toivomme ett√§ l√§hetyksen aikana kamerasi on suljettu',
                micMessage: 'Toivomme ett√§ l√§hetyksen aikana mikrofonisi on suljettu',
                footerTop: 'SeniorSurf seniorien digiosallisuuden edist√§j√§',
                footerBottom: 'Palvelun tarjoaa Vanhusty√∂n keskusliitto ry',
                titleAbove: 'Yll√§',
                titleBelow: 'Alla',
                titleOverlay: 'Kuvassa',
                breakTitle: 'Pieni tauko',
                musicNone: 'Ei musiikkia',
                musicCustom: 'Oma musiikkitiedosto',
                musicAiry: 'Ilmava ja kevyt (synteesi)',
                musicWarm: 'L√§mmin ja pehme√§ (synteesi)',
                musicCalm: 'Tyyni ja syv√§ (synteesi)',
                sunoInspiring: 'Suno 1: Inspiroiva digi',
                sunoSummer: 'Suno 2: Kes√§p√§iv√§',
                sunoJourney: 'Suno 3: Digimatka',
                sunoPeace: 'Suno 4: Rauha',
                sunoFuture: 'Suno 5: Tulevaisuus'
            },
            sv: {
                settings: 'Inst√§llningar',
                language: 'Spr√•k',
                eventTitle: 'Rubrik',
                titlePos: 'Rubrikens placering',
                startTime: 'Starttid',
                bgColor: 'Bakgrundsf√§rg',
                extraInfoLabel: 'Till√§ggsinformation',
                music: 'Bakgrundsmusik',
                musicSunoNotice: 'Ladda upp genererade l√•tar:',
                logo: 'Ladda upp logotyp',
                bgImage: 'Ladda upp bakgrundsbild',
                breakMode: 'H√§ndelsestatus',
                breakOn: 'Paus p√•',
                camWarning: 'Kameraf√∂rbud',
                micWarning: 'Mikrofonf√∂rbud',
                showSeconds: 'Visa sekunder',
                ready: 'KLART',
                startsIn: 'H√§ndelsen b√∂rjar om',
                notice: 'Meddelande',
                days: 'Dag',
                hours: 'Tim',
                minutes: 'Min',
                seconds: 'Sek',
                camMessage: 'Vi √∂nskar att din kamera √§r avst√§ngd under s√§ndningen',
                micMessage: 'Vi √∂nskar ett√§ din mikrofon √§r avst√§ngd under s√§ndningen',
                footerTop: 'SeniorSurf fr√§mjar seniorers digitala delaktighet',
                footerBottom: 'Tj√§nsten tillhandah√•lls av Centralf√∂rbundet f√∂r de gamlas v√§l ry',
                titleAbove: 'Ovanf√∂r',
                titleBelow: 'Under',
                titleOverlay: 'P√• bilden',
                breakTitle: 'Kort paus',
                musicNone: 'Ingen musik',
                musicCustom: 'Egen musikfil',
                musicAiry: 'Luftig och l√§tt',
                musicWarm: 'Varm och mjuk',
                musicCalm: 'Lugn och djup',
                sunoInspiring: 'Suno 1',
                sunoSummer: 'Suno 2',
                sunoJourney: 'Suno 3',
                sunoPeace: 'Suno 4',
                sunoFuture: 'Suno 5'
            },
            en: {
                settings: 'Settings',
                language: 'Language',
                eventTitle: 'Title',
                titlePos: 'Title position',
                startTime: 'Start Time',
                bgColor: 'Background Color',
                extraInfoLabel: 'Additional Info',
                music: 'Background Music',
                musicSunoNotice: 'Upload generated tracks:',
                logo: 'Upload Logo',
                bgImage: 'Upload Background Image',
                breakMode: 'Event Status',
                breakOn: 'Break Active',
                camWarning: 'Camera restriction',
                micWarning: 'Microphone restriction',
                showSeconds: 'Show seconds',
                ready: 'DONE',
                startsIn: 'Event starts in',
                notice: 'Notice',
                days: 'Days',
                hours: 'Hrs',
                minutes: 'Min',
                seconds: 'Sec',
                camMessage: 'We kindly ask you to keep your camera turned off during the broadcast',
                micMessage: 'We kindly ask you to keep your microphone muted during the broadcast',
                footerTop: 'SeniorSurf promoting digital inclusion for seniors',
                footerBottom: 'Service provided by the Central Union for the Welfare of the Aged ry',
                titleAbove: 'Above',
                titleBelow: 'Below',
                titleOverlay: 'In picture',
                breakTitle: 'Short Break',
                musicNone: 'No music',
                musicCustom: 'Custom music file',
                musicAiry: 'Airy and light',
                musicWarm: 'Warm and soft',
                musicCalm: 'Calm and deep',
                sunoInspiring: 'Suno 1',
                sunoSummer: 'Suno 2',
                sunoJourney: 'Suno 3',
                sunoPeace: 'Suno 4',
                sunoFuture: 'Suno 5'
            }
        };

        const MusicType = {
            NONE: 'NONE',
            CUSTOM: 'CUSTOM',
            AIRY: 'AIRY',
            WARM: 'WARM',
            CALM: 'CALM',
            SUNO1: 'SUNO1',
            SUNO2: 'SUNO2',
            SUNO3: 'SUNO3',
            SUNO4: 'SUNO4',
            SUNO5: 'SUNO5'
        };

        class AudioService {
            constructor() {
                this.audioCtx = null;
                this.mainGain = null;
                this.currentType = MusicType.NONE;
                this.volume = 0.25;
                this.isMuted = false;
                this.audioEl = null;
                this.activeIntervals = [];
                this.voices = new Set();
            }

            init() {
                if (!this.audioCtx) {
                    this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                    this.mainGain = this.audioCtx.createGain();
                    this.mainGain.connect(this.audioCtx.destination);
                    this.mainGain.gain.setValueAtTime(this.isMuted ? 0 : this.volume, this.audioCtx.currentTime);
                }
                if (this.audioCtx.state === 'suspended') {
                    this.audioCtx.resume();
                }
            }

            setMuted(muted) {
                this.isMuted = muted;
                if (this.mainGain && this.audioCtx) {
                    const targetGain = this.isMuted ? 0 : this.volume;
                    this.mainGain.gain.setTargetAtTime(targetGain, this.audioCtx.currentTime, 0.3);
                }
                if (this.audioEl) {
                    this.audioEl.volume = this.isMuted ? 0 : this.volume;
                }
            }

            spawnPad(freq, type = 'sine', panValue = 0, duration = 10) {
                if (!this.audioCtx || !this.mainGain) return;
                const osc = this.audioCtx.createOscillator();
                const vGain = this.audioCtx.createGain();
                const panner = this.audioCtx.createPanner();
                const filter = this.audioCtx.createBiquadFilter();

                osc.type = type;
                osc.frequency.setValueAtTime(freq, this.audioCtx.currentTime);
                
                const lfo = this.audioCtx.createOscillator();
                const lfoGain = this.audioCtx.createGain();
                lfo.frequency.setValueAtTime(Math.random() * 0.5 + 0.1, this.audioCtx.currentTime);
                lfoGain.gain.setValueAtTime(freq * 0.005, this.audioCtx.currentTime);
                lfo.connect(lfoGain);
                lfoGain.connect(osc.frequency);
                lfo.start();

                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(800 + Math.random() * 400, this.audioCtx.currentTime);
                panner.setPosition(panValue, 0, 1 - Math.abs(panValue));
                vGain.gain.setValueAtTime(0, this.audioCtx.currentTime);
                
                osc.connect(filter); filter.connect(panner); panner.connect(vGain); vGain.connect(this.mainGain);

                const now = this.audioCtx.currentTime;
                vGain.gain.linearRampToValueAtTime(0.08, now + duration * 0.4);
                vGain.gain.linearRampToValueAtTime(0, now + duration);

                osc.start(now); osc.stop(now + duration);
                this.voices.add(osc);
                osc.onended = () => { this.voices.delete(osc); lfo.stop(); osc.disconnect(); vGain.disconnect(); };
            }

            play(type, settings) {
                this.init();
                if (this.currentType === type && type !== MusicType.CUSTOM) return;
                this.stop();
                this.currentType = type;

                if (type === MusicType.NONE) return;

                // Haetaan tiedostopohjaiset √§√§net
                let fileUrl = null;
                if (type === MusicType.CUSTOM) fileUrl = settings.customMusicUrl;
                else if (type === MusicType.SUNO1) fileUrl = settings.suno1Url;
                else if (type === MusicType.SUNO2) fileUrl = settings.suno2Url;
                else if (type === MusicType.SUNO3) fileUrl = settings.suno3Url;
                else if (type === MusicType.SUNO4) fileUrl = settings.suno4Url;
                else if (type === MusicType.SUNO5) fileUrl = settings.suno5Url;

                if (fileUrl) {
                    this.audioEl = new Audio(fileUrl);
                    this.audioEl.loop = true;
                    this.audioEl.volume = this.isMuted ? 0 : this.volume;
                    this.audioEl.play().catch(e => console.error("Toistovirhe:", e));
                    return;
                }

                // Generatiivinen Ambient (jos ei tiedostoa)
                const schedule = () => {
                    let freqs = [];
                    if (type === MusicType.AIRY) freqs = [174.61, 220.00, 261.63, 349.23];
                    else if (type === MusicType.WARM) freqs = [130.81, 164.81, 196.00, 261.63];
                    else if (type === MusicType.CALM) freqs = [110.00, 146.83, 164.81, 220.00];
                    else return;

                    const f = freqs[Math.floor(Math.random() * freqs.length)];
                    this.spawnPad(f, 'sine', (Math.random() - 0.5) * 2, 10 + Math.random() * 5);
                };

                for(let i=0; i<3; i++) setTimeout(schedule, i * 2000);
                const interval = setInterval(schedule, 4500);
                this.activeIntervals.push(interval);
            }

            stop() {
                if (this.audioEl) { this.audioEl.pause(); this.audioEl = null; }
                this.activeIntervals.forEach(clearInterval);
                this.activeIntervals = [];
                const now = this.audioCtx?.currentTime || 0;
                this.voices.forEach(v => { try { v.stop(now + 1); } catch(e) {} });
                this.voices.clear();
                this.currentType = MusicType.NONE;
            }
        }

        const audioService = new AudioService();

        const SettingsModal = ({ settings, setSettings, onClose }) => {
            const t = translations[settings.language];

            const handleFileChange = (e, key) => {
                const file = e.target.files?.[0];
                if (file) {
                    const url = URL.createObjectURL(file);
                    setSettings({ ...settings, [key]: url });
                }
            };

            return html`
                <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4">
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden animate-in fade-in zoom-in duration-300">
                        <div className="p-6 border-b flex justify-between items-center">
                            <h2 className="text-xl font-semibold text-slate-800">${t.settings}</h2>
                            <button onClick=${onClose} className="text-slate-400 hover:text-slate-600 transition-colors">
                                <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>

                        <div className="p-6 overflow-y-auto settings-scroll flex-1 space-y-6">
                            <!-- Kieli ja Otsikko poistettu t√§st√§ kohdasta toiston v√§ltt√§miseksi jos ne on jo -->
                            <div className="space-y-2">
                                <label className="text-xs font-semibold text-slate-500 uppercase">${t.language}</label>
                                <div className="grid grid-cols-3 gap-2">
                                    ${['fi', 'sv', 'en'].map(lang => html`
                                        <button key=${lang} onClick=${() => setSettings({...settings, language: lang})}
                                            className="px-3 py-2 text-xs font-bold rounded-lg border transition-all ${settings.language === lang ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-slate-600 border-slate-200'}">
                                            ${lang.toUpperCase()}
                                        </button>
                                    `)}
                                </div>
                            </div>

                            <div className="space-y-4">
                                <div className="space-y-2">
                                    <label className="text-sm font-medium text-slate-600">${t.eventTitle}</label>
                                    <input className="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg outline-none text-slate-800" 
                                        value=${settings.eventTitle} 
                                        onChange=${e => setSettings({...settings, eventTitle: e.target.value})} />
                                </div>
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div className="flex flex-col space-y-2">
                                    <label className="text-xs font-semibold text-slate-500 uppercase">${t.startTime}</label>
                                    <input type="time" className="w-full h-11 px-4 py-2 bg-white border-2 border-slate-300 rounded-xl outline-none text-lg font-bold text-slate-900 shadow-sm focus:border-blue-500 transition-all" 
                                        value=${settings.startTime} 
                                        onChange=${e => setSettings({...settings, startTime: e.target.value})} />
                                </div>
                            </div>

                            <div className="space-y-4 p-4 bg-slate-50 rounded-xl border border-slate-100">
                                <label className="text-sm font-bold text-slate-700 uppercase tracking-wider">${t.music}</label>
                                <select className="w-full px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-800" 
                                    value=${settings.musicType} 
                                    onChange=${e => setSettings({...settings, musicType: e.target.value})}>
                                    <option value=${MusicType.NONE}>${t.musicNone}</option>
                                    <option value=${MusicType.CUSTOM}>${t.musicCustom}</option>
                                    <optgroup label="Ambient Synteesi">
                                        <option value=${MusicType.AIRY}>${t.musicAiry}</option>
                                        <option value=${MusicType.WARM}>${t.musicWarm}</option>
                                        <option value=${MusicType.CALM}>${t.musicCalm}</option>
                                    </optgroup>
                                    <optgroup label="Suno (Ladatut tiedostot)">
                                        <option value=${MusicType.SUNO1}>${t.sunoInspiring}</option>
                                        <option value=${MusicType.SUNO2}>${t.sunoSummer}</option>
                                        <option value=${MusicType.SUNO3}>${t.sunoJourney}</option>
                                        <option value=${MusicType.SUNO4}>${t.sunoPeace}</option>
                                        <option value=${MusicType.SUNO5}>${t.sunoFuture}</option>
                                    </optgroup>
                                </select>
                                
                                <div className="space-y-3 pt-2">
                                    <p className="text-[11px] text-slate-500 font-bold uppercase tracking-wider">${t.musicSunoNotice}</p>
                                    <div className="grid grid-cols-1 gap-2">
                                        ${[1,2,3,4,5].map(i => html`
                                            <div key=${i} className="flex items-center gap-3 bg-white p-2 rounded-lg border border-slate-200">
                                                <span className="text-[10px] font-bold text-slate-400 w-4">${i}</span>
                                                <input type="file" accept="audio/*,video/*" onChange=${e => handleFileChange(e, `suno${i}Url`)} className="text-[10px] flex-1" />
                                                ${settings[`suno${i}Url`] && html`<span className="text-green-500">‚úì</span>`}
                                            </div>
                                        `)}
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-4">
                                <div>
                                    <label className="text-xs font-semibold text-slate-500 uppercase">${t.bgImage}</label>
                                    <input type="file" accept="image/*" onChange=${e => handleFileChange(e, 'imageUrl')} className="text-sm w-full" />
                                </div>
                            </div>
                        </div>

                        <div className="p-6 border-t bg-slate-50 flex justify-end">
                            <button onClick=${onClose} className="px-8 py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition-all active:scale-95 shadow-lg shadow-slate-200">${t.ready}</button>
                        </div>
                    </div>
                </div>
            `;
        };

        const App = () => {
            const [settings, setSettings] = useState({
                language: 'fi',
                eventTitle: 'Verkkol√§hetyksen Otsikko',
                startTime: '10:00',
                backgroundColor: '#f1f5f9',
                showSeconds: true,
                extraInfo: 'Tervetuloa mukaan! Aloitamme hetken kuluttua.',
                musicType: MusicType.NONE,
                customMusicUrl: null,
                suno1Url: null, suno2Url: null, suno3Url: null, suno4Url: null, suno5Url: null,
                logoUrl: null,
                imageUrl: 'https://images.unsplash.com/photo-1475721027785-f74eccf877e2?auto=format&fit=crop&q=80&w=1200',
                showCameraWarning: true,
                showMicWarning: true,
                titlePosition: 'overlay',
                isBreakMode: false,
                breakText: 'Olemme pienell√§ tauolla. Palaamme pian!',
            });

            const t = translations[settings.language];
            const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });
            const [isSettingsOpen, setIsSettingsOpen] = useState(false);
            const [isMuted, setIsMuted] = useState(false);

            useEffect(() => {
                const timer = setInterval(() => {
                    if (!settings.startTime) return;
                    const [h, m] = settings.startTime.split(':').map(Number);
                    const target = new Date(); target.setHours(h, m, 0, 0);
                    if (target.getTime() < Date.now()) target.setDate(target.getDate() + 1);
                    const diff = Math.max(0, target.getTime() - Date.now());
                    setTimeLeft({
                        days: Math.floor(diff / (1000 * 60 * 60 * 24)),
                        hours: Math.floor((diff / (1000 * 60 * 60)) % 24),
                        minutes: Math.floor((diff / 1000 / 60) % 60),
                        seconds: Math.floor((diff / 1000) % 60)
                    });
                }, 1000);
                return () => clearInterval(timer);
            }, [settings.startTime]);

            useEffect(() => {
                audioService.play(settings.musicType, settings);
            }, [settings.musicType, settings.customMusicUrl, settings.suno1Url, settings.suno2Url, settings.suno3Url, settings.suno4Url, settings.suno5Url]);

            useEffect(() => { audioService.setMuted(isMuted); }, [isMuted]);

            const Title = ({ isOverlay }) => html`
                <h1 className="font-bold tracking-tight leading-tight ${isOverlay ? "text-3xl md:text-5xl text-white drop-shadow-2xl" : "text-3xl md:text-5xl text-slate-900"}">
                    ${settings.eventTitle}
                </h1>
            `;

            return html`
                <div className="h-screen w-screen flex flex-col relative transition-colors duration-700" style=${{ backgroundColor: settings.backgroundColor }}>
                    
                    <div className="absolute top-8 left-8 z-20">
                        ${settings.logoUrl ? html`<img src=${settings.logoUrl} className="h-20 md:h-28 object-contain" />` : html`<div className="h-20 w-20 md:h-28 md:w-28 bg-white/50 rounded-2xl flex items-center justify-center text-slate-400 text-[10px] font-bold uppercase border border-dashed">Logo</div>`}
                    </div>

                    <main className="flex-1 flex flex-col items-center justify-center px-8 lg:px-20 py-10">
                        <div className="w-full max-w-7xl grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
                            
                            <div className="lg:col-span-7 flex flex-col items-center lg:items-start space-y-6">
                                <div className="w-full aspect-video bg-white rounded-[2.5rem] overflow-hidden shadow-2xl relative border-8 border-white/50">
                                    <img src=${settings.imageUrl} className="w-full h-full object-cover" />
                                    <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent flex items-end pb-12 px-10">
                                        <${Title} isOverlay=${true} />
                                    </div>
                                    ${settings.isBreakMode && html`
                                        <div className="absolute inset-0 bg-purple-900/60 backdrop-blur-md flex items-center justify-center z-20">
                                            <div className="bg-white px-10 py-6 rounded-3xl shadow-2xl border-b-8 border-purple-700 transform -rotate-3">
                                                <span className="text-3xl md:text-5xl font-black text-purple-700 uppercase tracking-tighter italic">${t.breakTitle}</span>
                                            </div>
                                        </div>
                                    `}
                                </div>
                            </div>

                            <div className="lg:col-span-5 flex flex-col space-y-6">
                                <div className="bg-white/40 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/60 shadow-2xl space-y-6">
                                    <p className="text-xs text-slate-500 font-bold uppercase tracking-[0.2em]">${settings.isBreakMode ? t.notice : t.startsIn}</p>
                                    ${settings.isBreakMode ? html`<p className="text-3xl font-bold text-slate-800 leading-tight">${settings.breakText}</p>` : html`
                                        <div className="flex gap-4">
                                            ${[
                                                {v: timeLeft.days, l: t.days, s: timeLeft.days > 0},
                                                {v: timeLeft.hours, l: t.hours, s: timeLeft.hours > 0 || timeLeft.days > 0},
                                                {v: timeLeft.minutes, l: t.minutes, s: true},
                                                {v: timeLeft.seconds, l: t.seconds, s: settings.showSeconds}
                                            ].filter(u => u.s).map(u => html`
                                                <div key=${u.l} className="flex flex-col items-center bg-white/80 rounded-3xl p-4 min-w-[80px] border border-white">
                                                    <span className="text-3xl md:text-5xl font-black text-slate-900 tabular-nums">${String(u.v).padStart(2, '0')}</span>
                                                    <span className="text-[10px] text-slate-400 font-black uppercase mt-1 tracking-widest">${u.l}</span>
                                                </div>
                                            `)}
                                        </div>
                                    `}
                                </div>

                                <div className="flex flex-col gap-3">
                                    ${settings.showCameraWarning && html`
                                        <div className="bg-red-50/80 backdrop-blur-sm text-red-700 px-5 py-4 rounded-2xl flex items-center gap-4 text-xs md:text-sm font-bold shadow-sm border border-red-200 animate-in slide-in-from-right duration-500">
                                            <div className="relative inline-flex items-center justify-center w-8 h-8">
                                                <span className="text-xl">üì∑</span>
                                                <div className="strike-line"></div>
                                            </div>
                                            <span>${t.camMessage}</span>
                                        </div>
                                    `}
                                    ${settings.showMicWarning && html`
                                        <div className="bg-slate-800/90 backdrop-blur-sm text-white px-5 py-4 rounded-2xl flex items-center gap-4 text-xs md:text-sm font-bold shadow-sm border border-slate-700 animate-in slide-in-from-right duration-700">
                                            <div className="relative inline-flex items-center justify-center w-8 h-8">
                                                <span className="text-xl">üé§</span>
                                                <div className="strike-line"></div>
                                            </div>
                                            <span>${t.micMessage}</span>
                                        </div>
                                    `}
                                </div>
                            </div>
                        </div>
                    </main>

                    <footer className="h-24 bg-white/20 backdrop-blur-xl flex flex-col items-center justify-center relative border-t border-white/40 px-4">
                        <div className="text-center space-y-1">
                            <p className="text-slate-600 text-sm font-semibold tracking-wide">${t.footerTop}</p>
                            <p className="text-slate-500 text-[11px] font-medium italic">${t.footerBottom}</p>
                        </div>
                        <div className="absolute right-12 flex gap-4">
                            <button onClick=${() => setIsMuted(!isMuted)} className="w-12 h-12 flex items-center justify-center bg-white rounded-2xl shadow-lg border border-slate-100 hover:scale-110 transition-transform">
                                ${isMuted ? 'üîá' : (settings.musicType !== 'NONE' ? html`
                                    <div className="music-playing-bars text-blue-600">
                                        <div className="music-bar"></div>
                                        <div className="music-bar" style=${{animationDelay: '0.2s'}}></div>
                                        <div className="music-bar" style=${{animationDelay: '0.4s'}}></div>
                                    </div>
                                ` : 'üîä')}
                            </button>
                            <button onClick=${() => setIsSettingsOpen(true)} className="w-12 h-12 flex items-center justify-center bg-white rounded-2xl shadow-lg border border-slate-100 hover:scale-110 transition-transform">
                                ‚öôÔ∏è
                            </button>
                        </div>
                    </footer>

                    ${isSettingsOpen && html`<${SettingsModal} settings=${settings} setSettings=${setSettings} onClose=${() => setIsSettingsOpen(false)} />`}
                </div>
            `;
        };

        ReactDOM.createRoot(document.getElementById('root')).render(html`<${App} />`);
    </script>
</body>
</html>
